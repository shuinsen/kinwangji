# 开发计划：前后端分离的皇極經世占卜应用

该计划旨在将现有的 Python 排盘逻辑改造为「FastAPI 后端 + React 前端」的前后端分离架构，并逐步支持微信小程序。

## 一、总体架构
- **后端**：使用 FastAPI 提供 REST API，封装 `wanji.py` 中的排盘算法。
- **前端**：使用 React 开发网页，负责收集用户八字信息并展示占卜结果。
- **微信小程序**：提供移动端输入与展示，调用同一 REST API。
- **通信**：前端通过 HTTP 请求调用后端 API，后端以 JSON 返回运势、吉方向、穿衣颜色等信息。

## 二、后端开发步骤
1. **抽取算法模块**
   - 将 `wanji.py` 中的核心函数封装为可复用的 Python 模块。
2. **搭建 FastAPI 项目结构**
   - 新建 `main.py`，实例化 `FastAPI` 对象。
   - 添加 `/fortune` 接口，接收年、月、日、时等参数，返回排盘结果。
3. **数据格式约定**
   - 请求：`GET /fortune?year=2024&month=6&day=1&hour=9`。
   - 响应：JSON，包含卦象、吉方向、穿衣颜色等字段。
4. **配置与部署**
   - 使用 `uvicorn` 作为开发服务器。
   - 如需跨域，添加 `fastapi.middleware.cors`。

## 三、前端开发步骤
1. **项目初始化**
   - 通过 `create-react-app` 或 Vite 创建 React 项目。
2. **页面与组件**
   - 表单组件：输入年、月、日、时。
   - 结果组件：展示 API 返回的吉凶、吉方向和颜色建议。
3. **API 调用**
   - 使用 `fetch` 或 `axios` 请求 `FastAPI` 提供的 `/fortune` 接口。
4. **样式与体验**
   - 根据吉凶结果动态展示图标或颜色。

## 四、后续扩展
- 用户登录与历史记录。
- 微信小程序端复用同一后端 API。
- Docker 化部署与 CI/CD。

## 五、里程碑
1. 完成 FastAPI 后端原型 —— 第1周。
2. 完成 React 前端原型，并实现基本交互 —— 第2周。
3. 完成微信小程序原型，支持基本查询 —— 第3周。
4. 联调测试与部署 —— 第4周。
5. 扩展功能与优化 —— 第5周及以后。

